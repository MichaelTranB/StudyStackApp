"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3182],{3182:(X,S,u)=>{u.r(S),u.d(S,{DiscoverPageModule:()=>Q});var _=u(177),V=u(4341),a=u(4742),r=u(3953),w=u(6780),x=u(8359);const f={schedule(n){let t=requestAnimationFrame,i=cancelAnimationFrame;const{delegate:e}=f;e&&(t=e.requestAnimationFrame,i=e.cancelAnimationFrame);const o=t(l=>{i=void 0,n(l)});return new x.yU(()=>null==i?void 0:i(o))},requestAnimationFrame(...n){const{delegate:t}=f;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=f;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var C=u(9687);new class E extends C.q{flush(t){this._active=!0;const i=this._scheduled;this._scheduled=void 0;const{actions:e}=this;let o;t=t||e.shift();do{if(o=t.execute(t.state,t.delay))break}while((t=e[0])&&t.id===i&&e.shift());if(this._active=!1,o){for(;(t=e[0])&&t.id===i&&e.shift();)t.unsubscribe();throw o}}}(class F extends w.R{constructor(t,i){super(t,i),this.scheduler=t,this.work=i}requestAsyncId(t,i,e=0){return null!==e&&e>0?super.requestAsyncId(t,i,e):(t.actions.push(this),t._scheduled||(t._scheduled=f.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,i,e=0){var o;if(null!=e?e>0:this.delay>0)return super.recycleAsyncId(t,i,e);const{actions:l}=t;null!=i&&(null===(o=l[l.length-1])||void 0===o?void 0:o.id)!==i&&(f.cancelAnimationFrame(i),t._scheduled=void 0)}});let v,I=1;const p={};function R(n){return n in p&&(delete p[n],!0)}const O={setImmediate(n){const t=I++;return p[t]=!0,v||(v=Promise.resolve()),v.then(()=>R(t)&&n()),t},clearImmediate(n){R(n)}},{setImmediate:z,clearImmediate:L}=O,g={setImmediate(...n){const{delegate:t}=g;return((null==t?void 0:t.setImmediate)||z)(...n)},clearImmediate(n){const{delegate:t}=g;return((null==t?void 0:t.clearImmediate)||L)(n)},delegate:void 0};new class A extends C.q{flush(t){this._active=!0;const i=this._scheduled;this._scheduled=void 0;const{actions:e}=this;let o;t=t||e.shift();do{if(o=t.execute(t.state,t.delay))break}while((t=e[0])&&t.id===i&&e.shift());if(this._active=!1,o){for(;(t=e[0])&&t.id===i&&e.shift();)t.unsubscribe();throw o}}}(class P extends w.R{constructor(t,i){super(t,i),this.scheduler=t,this.work=i}requestAsyncId(t,i,e=0){return null!==e&&e>0?super.requestAsyncId(t,i,e):(t.actions.push(this),t._scheduled||(t._scheduled=g.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,i,e=0){var o;if(null!=e?e>0:this.delay>0)return super.recycleAsyncId(t,i,e);const{actions:l}=t;null!=i&&(null===(o=l[l.length-1])||void 0===o?void 0:o.id)!==i&&(g.clearImmediate(i),t._scheduled===i&&(t._scheduled=void 0))}});let b=(()=>{var n;class t{}return(n=t).\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.$C({type:n}),n.\u0275inj=r.G2t({}),t})(),y=(()=>{var n;class t{}return(n=t).\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.$C({type:n}),n.\u0275inj=r.G2t({}),t})(),N=(()=>{var n;class t{}return(n=t).\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.$C({type:n}),n.\u0275inj=r.G2t({imports:[b,y,b,y]}),t})();var W=u(6697),U=u(8591),Z=u(5709),k=u(5171);const D=n=>["/","places","tabs","discover",n];function G(n,t){1&n&&(r.j41(0,"ion-grid")(1,"ion-row")(2,"ion-col",6),r.nrm(3,"ion-spinner",7),r.k0s()()())}function $(n,t){1&n&&(r.j41(0,"ion-grid")(1,"ion-row")(2,"ion-col",6)(3,"p"),r.EFF(4,"There are no bookable places right now, please come back later!"),r.k0s()()()())}function H(n,t){if(1&n&&(r.j41(0,"ion-item",12)(1,"ion-thumbnail",0),r.nrm(2,"ion-img",8),r.k0s(),r.j41(3,"ion-label")(4,"h2"),r.EFF(5),r.k0s(),r.j41(6,"p"),r.EFF(7),r.k0s()()()),2&n){const i=t.$implicit;r.Y8G("routerLink",r.eq3(4,D,i.id)),r.R7$(2),r.Y8G("src",i.imageUrl),r.R7$(3),r.JRh(i.title),r.R7$(2),r.JRh(i.description)}}function Y(n,t){if(1&n&&(r.j41(0,"ion-grid")(1,"ion-row")(2,"ion-col",6)(3,"ion-card")(4,"ion-card-header")(5,"ion-card-title"),r.EFF(6),r.k0s(),r.j41(7,"ion-card-subtitle"),r.EFF(8),r.nI1(9,"currency"),r.k0s()(),r.nrm(10,"ion-img",8),r.j41(11,"ion-card-content")(12,"p"),r.EFF(13),r.k0s()(),r.j41(14,"div")(15,"ion-button",9),r.EFF(16," More "),r.k0s()()()()(),r.j41(17,"ion-row")(18,"ion-col",6)(19,"ion-virtual-scroll",10),r.DNE(20,H,8,6,"ion-item",11),r.k0s()()()()),2&n){const i=r.XpG();r.R7$(6),r.JRh(i.relevantPlaces[0].title),r.R7$(2),r.SpI(" ",r.bMT(9,6,i.relevantPlaces[0].price)," / Night "),r.R7$(2),r.Y8G("src",i.relevantPlaces[0].imageUrl),r.R7$(3),r.JRh(i.relevantPlaces[0].description),r.R7$(2),r.Y8G("routerLink",r.eq3(8,D,i.relevantPlaces[0].id)),r.R7$(4),r.Y8G("items",i.listedLoadedPlaces)}}const q=[{path:"",component:(()=>{var n;class t{constructor(e,o,l){this.placesService=e,this.menuCtrl=o,this.authService=l,this.isLoading=!1}ngOnInit(){this.placesSub=this.placesService.places.subscribe(e=>{this.loadedPlaces=e,this.relevantPlaces=this.loadedPlaces,this.listedLoadedPlaces=this.relevantPlaces.slice(1)})}ionViewWillEnter(){this.isLoading=!0,this.placesService.fetchPlaces().subscribe(()=>{this.isLoading=!1})}onOpenMenu(){this.menuCtrl.toggle()}onFilterUpdate(e){"all"===e.detail.value?(this.relevantPlaces=this.loadedPlaces,this.listedLoadedPlaces=this.relevantPlaces.slice(1)):this.authService.userId.pipe((0,W.s)(1)).subscribe(o=>{this.relevantPlaces=this.loadedPlaces.filter(l=>l.userId!==o),this.listedLoadedPlaces=this.relevantPlaces.slice(1)})}ngOnDestroy(){this.placesSub&&this.placesSub.unsubscribe()}}return(n=t).\u0275fac=function(e){return new(e||n)(r.rXU(U._),r.rXU(a._t),r.rXU(Z.u))},n.\u0275cmp=r.VBU({type:n,selectors:[["app-discover"]],decls:15,vars:3,consts:[["slot","start"],[1,"ion-padding"],["value","all",3,"ionChange"],["value","all"],["value","bookable"],[4,"ngIf"],["size","12","size-sm","8","offset-sm","2",1,"ion-text-center"],["color","primary"],[3,"src"],["fill","clear","color","primary",3,"routerLink"],["approxItemHeight","70px",3,"items"],["detail","",3,"routerLink",4,"virtualItem"],["detail","",3,"routerLink"]],template:function(e,o){1&e&&(r.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),r.nrm(3,"ion-menu-button"),r.k0s(),r.j41(4,"ion-title"),r.EFF(5,"Discover Places"),r.k0s()()(),r.j41(6,"ion-content",1)(7,"ion-segment",2),r.bIt("ionChange",function(s){return o.onFilterUpdate(s)}),r.j41(8,"ion-segment-button",3),r.EFF(9,"All Places"),r.k0s(),r.j41(10,"ion-segment-button",4),r.EFF(11,"Bookable Places"),r.k0s()(),r.DNE(12,G,4,0,"ion-grid",5)(13,$,5,0,"ion-grid",5)(14,Y,21,10,"ion-grid",5),r.k0s()),2&e&&(r.R7$(12),r.Y8G("ngIf",o.isLoading),r.R7$(),r.Y8G("ngIf",!o.isLoading&&(!o.relevantPlaces||o.relevantPlaces.length<=0)),r.R7$(),r.Y8G("ngIf",!o.isLoading&&o.relevantPlaces.length>0))},dependencies:[_.bT,a.Jm,a.QW,a.b_,a.I9,a.ME,a.HW,a.tN,a.hU,a.W9,a.lO,a.eU,a.KW,a.uz,a.he,a.MC,a.ln,a.Gp,a.eP,a.w2,a.Zx,a.BC,a.ai,a.Je,a.N7,k.Wk,_.oe]}),t})()}];let Q=(()=>{var n;class t{}return(n=t).\u0275fac=function(e){return new(e||n)},n.\u0275mod=r.$C({type:n}),n.\u0275inj=r.G2t({imports:[_.MD,V.YN,a.bv,k.iI.forChild(q),N]}),t})()}}]);