"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4230],{4230:(P,m,l)=>{l.r(m),l.d(m,{AccountPageModule:()=>N});var p=l(177),u=l(4341),o=l(4742),d=l(9384),t=l(3953);let f=(()=>{var n;class s{constructor(e){this.modalCtrl=e}dismiss(){this.modalCtrl.dismiss()}submit(){this.firstName&&this.lastName&&this.email&&this.modalCtrl.dismiss({firstName:this.firstName,lastName:this.lastName,email:this.email})}}return(n=s).\u0275fac=function(e){return new(e||n)(t.rXU(o.W3))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-account-modal"]],inputs:{firstName:"firstName",lastName:"lastName",email:"email"},decls:22,vars:3,consts:[["slot","end"],[3,"click"],["position","floating"],[3,"ngModelChange","ngModel"],["type","email",3,"ngModelChange","ngModel"],["expand","full",3,"click"]],template:function(e,i){1&e&&(t.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Edit Account Details"),t.k0s(),t.j41(4,"ion-buttons",0)(5,"ion-button",1),t.bIt("click",function(){return i.dismiss()}),t.EFF(6,"Close"),t.k0s()()()(),t.j41(7,"ion-content")(8,"ion-item")(9,"ion-label",2),t.EFF(10,"First Name"),t.k0s(),t.j41(11,"ion-input",3),t.mxI("ngModelChange",function(c){return t.DH7(i.firstName,c)||(i.firstName=c),c}),t.k0s()(),t.j41(12,"ion-item")(13,"ion-label",2),t.EFF(14,"Last Name"),t.k0s(),t.j41(15,"ion-input",3),t.mxI("ngModelChange",function(c){return t.DH7(i.lastName,c)||(i.lastName=c),c}),t.k0s()(),t.j41(16,"ion-item")(17,"ion-label",2),t.EFF(18,"Email"),t.k0s(),t.j41(19,"ion-input",4),t.mxI("ngModelChange",function(c){return t.DH7(i.email,c)||(i.email=c),c}),t.k0s()(),t.j41(20,"ion-button",5),t.bIt("click",function(){return i.submit()}),t.EFF(21,"Update"),t.k0s()()),2&e&&(t.R7$(11),t.R50("ngModel",i.firstName),t.R7$(4),t.R50("ngModel",i.lastName),t.R7$(4),t.R50("ngModel",i.email))},dependencies:[u.BC,u.vS,o.Jm,o.QW,o.W9,o.eU,o.$w,o.uz,o.he,o.BC,o.ai,o.Gw]}),s})();var h=l(5709),g=l(4458);let C=(()=>{var n;class s{constructor(e){this.accountService=e,this.firstName="",this.lastName="",this.email="",this.userId=sessionStorage.getItem("userId")}ngOnInit(){this.userId&&this.accountService.fetchAccount().subscribe(e=>{const i=e.find(r=>r.userId===this.userId);i&&(this.firstName=i.firstName,this.lastName=i.lastName,this.email=i.email)})}}return(n=s).\u0275fac=function(e){return new(e||n)(t.rXU(g.D))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-profile-picture"]],decls:9,vars:3,consts:[[2,"width","100%"],[2,"display","flex","align-items","center"],[2,"margin-right","40px","width","120px","height","120px"],["src","https://cdn-icons-png.freepik.com/512/5997/5997002.png","alt","Profile Picture",2,"width","100%","height","100%","border-radius","50%"],[2,"display","flex","flex-direction","column","justify-content","center"]],template:function(e,i){1&e&&(t.j41(0,"ion-card",0)(1,"ion-card-content",1)(2,"ion-avatar",2),t.nrm(3,"img",3),t.k0s(),t.j41(4,"div",4)(5,"ion-card-title"),t.EFF(6),t.k0s(),t.j41(7,"ion-card-subtitle"),t.EFF(8),t.k0s()()()()),2&e&&(t.R7$(6),t.Lme("",i.firstName," ",i.lastName,""),t.R7$(2),t.SpI("Email: ",i.email,""))},dependencies:[o.mC,o.b_,o.I9,o.HW,o.tN]}),s})();const M=[{path:"",component:(()=>{var n;class s{constructor(e,i){this.authService=e,this.modalCtrl=i,this.user=null}ngOnInit(){this.userSub=this.authService.user.subscribe(e=>{this.user=e})}ngOnDestroy(){this.userSub&&this.userSub.unsubscribe()}openEditAccountModal(){this.user&&this.modalCtrl.create({component:f,componentProps:{firstName:this.user.firstName,lastName:this.user.lastName,email:this.user.email}}).then(e=>(e.present(),e.onDidDismiss())).then(e=>{if("confirm"===e.role&&e.data){const i=e.data;this.authService.updateAccountDetails(this.user.id,i.firstName,i.lastName,i.email).subscribe(()=>{console.log("Profile updated successfully")})}})}}return(n=s).\u0275fac=function(e){return new(e||n)(t.rXU(h.u),t.rXU(o.W3))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-account"]],decls:14,vars:2,consts:[[3,"translucent"],[3,"fullscreen"],["collapse","condense"],["size","large"],[2,"max-width","600px","margin","0 auto","padding","16px"],["expand","full","color","primary",3,"click"],["name","create-outline","slot","start"]],template:function(e,i){1&e&&(t.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t.EFF(3,"Account"),t.k0s()()(),t.j41(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),t.EFF(8,"Account"),t.k0s()()(),t.j41(9,"div",4),t.nrm(10,"app-profile-picture"),t.j41(11,"ion-button",5),t.bIt("click",function(){return i.openEditAccountModal()}),t.nrm(12,"ion-icon",6),t.EFF(13," Edit Account Details "),t.k0s()()()),2&e&&(t.Y8G("translucent",!0),t.R7$(4),t.Y8G("fullscreen",!0))},dependencies:[o.Jm,o.W9,o.eU,o.iq,o.BC,o.ai,C]}),s})()}];let A=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[d.iI.forChild(M),d.iI]}),s})(),N=(()=>{var n;class s{}return(n=s).\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[p.MD,u.YN,o.bv,A]}),s})()}}]);