"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6926],{6926:(C,b,c)=>{c.r(b),c.d(b,{AuthPageModule:()=>y});var v=c(177),u=c(4341),A=c(9384),o=c(4742),e=c(3953),F=c(5709);function L(i,l){1&i&&(e.j41(0,"ion-item",18)(1,"ion-label",19),e.EFF(2,"First name is required."),e.k0s()())}function S(i,l){if(1&i&&(e.j41(0,"ion-item")(1,"ion-label",9),e.EFF(2,"First Name"),e.k0s(),e.nrm(3,"ion-input",17,3),e.DNE(5,L,3,0,"ion-item",11),e.k0s()),2&i){const r=e.sdS(4);e.R7$(5),e.Y8G("ngIf",r.touched&&!r.valid)}}function _(i,l){1&i&&(e.j41(0,"ion-item",18)(1,"ion-label",19),e.EFF(2,"Last name is required."),e.k0s()())}function k(i,l){if(1&i&&(e.j41(0,"ion-item")(1,"ion-label",9),e.EFF(2,"Last Name"),e.k0s(),e.nrm(3,"ion-input",20,4),e.DNE(5,_,3,0,"ion-item",11),e.k0s()),2&i){const r=e.sdS(4);e.R7$(5),e.Y8G("ngIf",r.touched&&!r.valid)}}function N(i,l){1&i&&(e.j41(0,"ion-item",18)(1,"ion-label",19),e.EFF(2,"Should be a valid email address."),e.k0s()())}function P(i,l){1&i&&(e.j41(0,"ion-item",18)(1,"ion-label",19),e.EFF(2,"Password should be at least 6 characters long."),e.k0s()())}const w=[{path:"",component:(()=>{var i;class l{constructor(t,n,s,a){this.authService=t,this.router=n,this.loadingCtrl=s,this.alertCtrl=a,this.isLoading=!1,this.isLogin=!0}authenticate(t,n,s,a,g){this.isLoading=!0,this.loadingCtrl.create({keyboardClose:!0,message:this.isLogin?"Logging in...":"Signing up..."}).then(m=>{let p;m.present(),this.isLogin?p=this.authService.login(n,s):(console.log("First Name:",a),console.log("Last Name:",g),p=this.authService.signup(n,s,a,g)),p.subscribe(()=>{this.isLoading=!1,m.dismiss(),this.router.navigateByUrl("/places/tabs/discover")},d=>{this.isLoading=!1,m.dismiss();let h="Could not sign you up, please try again.";if(d&&d.error&&d.error.error){const f=d.error.error.message;"EMAIL_EXISTS"===f?h="This email address exists already!":"EMAIL_NOT_FOUND"===f?h="E-Mail address could not be found.":"INVALID_PASSWORD"===f&&(h="This password is not correct.")}else h=d.message||"An unknown error occurred!";this.showAlert(h)})})}onSwitchAuthMode(){this.isLogin=!this.isLogin}onSubmit(t){if(!t.valid)return;const n=t.value.email,s=t.value.password,a=t.value.firstName,g=t.value.lastName;this.isLogin?this.authenticate(t,n,s):this.authenticate(t,n,s,a,g),t.reset()}showAlert(t){this.alertCtrl.create({header:"Authentication failed",message:t,buttons:["Okay"]}).then(n=>n.present())}onLoginWithGoogle(){this.isLoading=!0,this.authService.loginWithGoogle().subscribe(()=>{this.isLoading=!1,this.router.navigateByUrl("/places/tabs/discover")},t=>{this.isLoading=!1,this.showAlert("Could not log you in with Google, please try again.")})}}return(i=l).\u0275fac=function(t){return new(t||i)(e.rXU(F.u),e.rXU(A.Ix),e.rXU(o.Xi),e.rXU(o.hG))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-auth"]],decls:36,vars:8,consts:[["f","ngForm"],["emailCtrl","ngModel"],["passwordCtrl","ngModel"],["firstNameCtrl","ngModel"],["lastNameCtrl","ngModel"],[1,"ion-padding"],[3,"ngSubmit"],["size-sm","6","offset-sm","3"],[4,"ngIf"],["position","floating"],["type","email","ngModel","","name","email","required","","email",""],["lines","none",4,"ngIf"],["type","password","ngModel","","name","password","required","","minlength","6"],["type","button","color","primary","fill","clear","expand","block",3,"click"],["type","submit","color","primary","expand","block",3,"disabled"],["type","button","color","danger","expand","block",3,"click"],["name","logo-google","slot","start"],["type","text","ngModel","","name","firstName","required",""],["lines","none"],["color","danger",1,"label-error"],["type","text","ngModel","","name","lastName","required",""]],template:function(t,n){if(1&t){const s=e.RV6();e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.k0s()()(),e.j41(4,"ion-content",5)(5,"form",6,0),e.bIt("ngSubmit",function(){e.eBV(s);const g=e.sdS(6);return e.Njj(n.onSubmit(g))}),e.j41(7,"ion-grid")(8,"ion-row")(9,"ion-col",7)(10,"ion-list"),e.DNE(11,S,6,1,"ion-item",8)(12,k,6,1,"ion-item",8),e.j41(13,"ion-item")(14,"ion-label",9),e.EFF(15,"E-Mail"),e.k0s(),e.nrm(16,"ion-input",10,1),e.DNE(18,N,3,0,"ion-item",11),e.k0s(),e.j41(19,"ion-item")(20,"ion-label",9),e.EFF(21,"Password"),e.k0s(),e.nrm(22,"ion-input",12,2),e.DNE(24,P,3,0,"ion-item",11),e.k0s()()()(),e.j41(25,"ion-row")(26,"ion-col",7)(27,"ion-button",13),e.bIt("click",function(){return e.eBV(s),e.Njj(n.onSwitchAuthMode())}),e.EFF(28),e.k0s(),e.j41(29,"ion-button",14),e.EFF(30),e.k0s()()(),e.j41(31,"ion-row")(32,"ion-col",7)(33,"ion-button",15),e.bIt("click",function(){return e.eBV(s),e.Njj(n.onLoginWithGoogle())}),e.nrm(34,"ion-icon",16),e.EFF(35," Login with Google "),e.k0s()()()()()()}if(2&t){const s=e.sdS(6),a=e.sdS(17),g=e.sdS(23);e.R7$(3),e.JRh(n.isLogin?"Login":"Signup"),e.R7$(8),e.Y8G("ngIf",!n.isLogin),e.R7$(),e.Y8G("ngIf",!n.isLogin),e.R7$(6),e.Y8G("ngIf",a.touched&&!a.valid),e.R7$(6),e.Y8G("ngIf",g.touched&&!g.valid),e.R7$(4),e.SpI(" Switch to ",n.isLogin?"Signup":"Login"," "),e.R7$(),e.Y8G("disabled",!s.valid),e.R7$(),e.SpI(" ",n.isLogin?"Login":"Signup"," ")}},dependencies:[v.bT,u.qT,u.BC,u.cb,u.YS,u.xh,u.Dg,u.vS,u.cV,o.Jm,o.hU,o.W9,o.lO,o.eU,o.iq,o.$w,o.uz,o.he,o.nf,o.ln,o.BC,o.ai,o.Gw],styles:[".label-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),l})()}];let y=(()=>{var i;class l{}return(i=l).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[v.MD,u.YN,o.bv,A.iI.forChild(w)]}),l})()}}]);